<!DOCTYPE html>
<html lang="pl" xmlns:th="http://www.thymeleaf.org"
xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Blog-app</title>

	<link rel="stylesheet" 
		href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
		th:href="@{/webjars/bootstrap/3.3.7/css/bootstrap.min.css}">

	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
			th:src="@{/webjars/bootstrap/3.3.7-1/js/bootstrap.min.js}"></script>
	
	<link th:href="@{/css/style.css}" rel="stylesheet"/>
  </head>

  <body>
    <nav class="navbar navbar-fixed-top navbar-inverse">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" th:href="@{/}">Blog-app</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a th:href="@{/}">Artykuły</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right" sec:authorize="isAnonymous()">
            <li><a th:href="@{/login}">Logowanie</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right" sec:authorize="hasRole('ROLE_ADMIN')">
          	<li><a>Witaj [[${#httpServletRequest.remoteUser}]]</a></li>
            <li><a th:href="@{/admin/}">Admin</a></li>
            <li><a th:href="@{/logout}">Wyloguj</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container">

      <div class="row row-offcanvas row-offcanvas-right">

        <div class="col-xs-12 col-sm-9">
          <p class="pull-right visible-xs">
            <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Toggle nav</button>
          </p>
          <div class="jumbotron">
            <h1>Blog-app</h1>
            <p>Prosty przykład aplikacji bloga napisanego przy użyciu frameworka Spring.</p>
          </div>
          
          <div class="row">
            <div class="col-xs-6 col-lg-6" th:each="article : ${articles}">
              <h2 th:text="${article.title}">Heading</h2>
              <p class="tags">Tagi : <span th:each="tag : ${article.tags}" th:text="${tag.name}+ ' '">tag1, tag2</span> </p>
              <p th:text="${article.shortDescription}">Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
              <p class="pull-right"><span class="custom-date">Data dodania :</span> <span class="current-date" th:text="${article.time}">21.03.2017 15:30</span></p>
              <p><a class="btn btn-primary btn-sm" href="#" role="button">Pokaż artykuł &raquo;</a></p>
            </div>
          </div>

			<div th:if="${articles.totalPages != 1}" class="form-group col-md-11 pagination-centered">
				<ul class="pagination">
					<li th:class="${articles.number == 0} ? disabled">
						<a class="pageLink" th:href="@{/(pageSize=${selectedPageSize}, page=1)}">&laquo;</a>
					</li>
					<li th:class="${articles.number == 0} ? disabled">
						<a class="pageLink" th:href="@{/(pageSize=${selectedPageSize}, page=${articles.number})}">&larr;</a>
					</li>
					<li th:class="${articles.number == (page - 1)} ? 'active pointer-disabled'"
						th:each="page : ${#numbers.sequence(pager.startPage, pager.endPage)}">
						<a class="pageLink" th:href="@{/(pageSize=${selectedPageSize}, page=${page})}" th:text="${page}"></a>
					</li>
					<li th:class="${articles.number + 1 == articles.totalPages} ? disabled">
						<a class="pageLink" th:href="@{/(pageSize=${selectedPageSize}, page=${articles.number + 2})}">&rarr;</a>
					</li>
					<li th:class="${articles.number + 1 == articles.totalPages} ? disabled">
						<a class="pageLink" th:href="@{/(pageSize=${selectedPageSize}, page=${articles.totalPages})}">&raquo;</a>
					</li>
				</ul>
			</div>
          </div>

        <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar">
          <p class="tags-header">tagi :</p>
          <div class="list-group" >
	         <div class="row">
	         	<div class="col-sm-6" th:each="tag : ${tags}">
		            <a href="#" class="list-group-item" th:text="${tag.name}"></a>
	         	</div>
	         </div> 
          </div>
        </div>
      </div>
      <hr>
      <footer>
        <p>&copy; 2017 Portfolio, cele szkoleniowe.</p>     
      </footer>

    </div>
  </body>
</html>
